/*! For license information please see 24.d333e98faa023269efb1.js.LICENSE.txt */
"use strict";(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[24,23],{1358:function(t,e,i){i.d(e,{v:function(){return n}});var r=i(321);function n(t){var e={};return((0,r.has)(t.theme_data,"arrows_position")||(0,r.has)(t,"active_arrows")||"theme_captions"===t.current_theme)&&"bottom"!==t.active_arrows||(e.theme_data=(0,r.extend)(t.theme_data,{arrows_position:"bottom"})),(0,r.has)(t.theme_data,"arrows_position")||((0,r.has)(t,"active_arrows")||"theme_captions"!==t.current_theme)&&"middle"!==t.active_arrows&&(0,r.has)(t,"active_arrows")||(e.theme_data=(0,r.extend)(t.theme_data,{arrows_position:"sides"})),((0,r.has)(t.theme_data,"counters_position")||(0,r.has)(t,"active_arrows")||"theme_captions"!==t.current_theme)&&"middle"!==t.active_arrows||(e.theme_data=(0,r.extend)(t.theme_data,{counters_position:"outside"})),(0,r.has)(t.theme_data,"counters_position")||"bottom"!==t.active_arrows||(e.theme_data=(0,r.extend)(t.theme_data,{counters_position:"inside"})),(0,r.has)(t.theme_data,"arrows")||(e.theme_data=(0,r.extend)(t.theme_data,{arrows:!0})),(0,r.has)(t.theme_data,"arrows_type")||(e.theme_data=(0,r.extend)(t.theme_data,{arrows_type:"default"})),"noun"===t.theme_data.arrows_type&&(e.theme_data=(0,r.extend)(t.theme_data,{arrows_type:"library"})),(0,r.has)(t,"play_method")&&t.play_method||(e.play_method="click"),t.theme_data.autoplay&&!t.play_method&&(e.play_method="autoplay"),(0,r.has)(t.theme_data,"counters_type")||"theme_captions"===t.current_theme||(e.theme_data=(0,r.extend)(t.theme_data,{counters_type:"numbers"})),(0,r.has)(t.theme_data,"counters_type")||"theme_captions"!==t.current_theme||(e.theme_data=(0,r.extend)(t.theme_data,{counters_type:"dots"})),(0,r.has)(t.theme_data,"captions")||"theme_captions"===t.current_theme||(e.theme_data=(0,r.extend)(t.theme_data,{captions:!1})),(0,r.has)(t.theme_data,"captions")||"theme_captions"!==t.current_theme||(e.theme_data=(0,r.extend)(t.theme_data,{captions:!0})),(0,r.has)(t.theme_data,"counters")||(e.theme_data=(0,r.extend)(t.theme_data,{counters:!1})),(0,r.has)(t.theme_data,"left_icon_noun")||(e.theme_data=(0,r.extend)(t.theme_data,{left_icon_noun:{}})),(0,r.has)(t.theme_data,"right_icon_noun")||(e.theme_data=(0,r.extend)(t.theme_data,{right_icon_noun:{}})),(0,r.has)(t,"current_mode")||(e.current_mode="default"),(0,r.has)(t.theme_data,"arrows_view_mode")||(e.theme_data=(0,r.extend)(t.theme_data,{arrows_view_mode:"normal"})),(0,r.has)(t.theme_data,"radius")||(e.theme_data=(0,r.extend)(t.theme_data,{radius:0})),(0,r.has)(t,"transition_type")||(e.transition_type="slider"),(0,r.has)(t.theme_data,"crossfade")||(e.theme_data=(0,r.extend)(t.theme_data,{crossfade:2})),(0,r.has)(t.theme_data,"scroll_delay")||(e.theme_data=(0,r.extend)(t.theme_data,{scroll_delay:1})),(0,r.has)(t.theme_data,"start_offset")||(e.theme_data=(0,r.extend)(t.theme_data,{start_offset:200})),(0,r.has)(t.theme_data,"slider_transition")||(e.theme_data=(0,r.extend)(t.theme_data,{slider_transition:.5})),(0,r.has)(t.theme_data,"autoplay_delay")||(e.theme_data=(0,r.extend)(t.theme_data,{autoplay_delay:4})),(0,r.has)(t.theme_data,"hover_delay")||(e.theme_data=(0,r.extend)(t.theme_data,{hover_delay:.8})),(0,r.has)(t.theme_data,"controls_bg")||(e.theme_data=(0,r.extend)(t.theme_data,{controls_bg:!0})),(0,r.has)(t.theme_data,"show_on_hover")||(e.theme_data=(0,r.extend)(t.theme_data,{show_on_hover:!1})),(0,r.has)(t,"current_theme")&&(e.current_theme=void 0),(0,r.has)(t,"active_arrows")&&(e.active_arrows=void 0),e}},923:function(t,e,i){var r=i(924),n=i(926);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object.assign({},t,"left"in t?{left:t.left*e}:{},"top"in t?{top:t.top*e}:{},"width"in t?{width:t.width*e}:{},"height"in t?{height:t.height*e}:{})},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0};return o(o({},t),{},{left:t.left+e.left,top:t.top+e.top})},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0};return c(t,e)},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0};return c(t,{left:-e.left,top:-e.top})},u=function(t,e,i,r){var s=l(t,1/i/e);if("left"in s&&"top"in s){var a=r?{left:r.scrollLeft,top:r.scrollTop}:(0,n.wA)();return d(s,l(a,1/e/i))}return s},p=function(t,e,i,s){var a=s?{left:s.scrollLeft,top:s.scrollTop}:(0,n.wA)();return r.U.isSafari()&&1!==i?m({left:t.pageX,top:t.pageY},a):{left:t.clientX,top:t.clientY}},g=function(t,e,i,s){var a,h={left:(a=t.getBoundingClientRect()).left,top:a.top,width:a.width,height:a.height},c=s?s.scrollTop:(0,n.wA)().top;return l(o(o({},h),{},{top:r.U.isSafari()&&1!==i?h.top+(1-1/i)*c:h.top}),i)},f=function(t,e,i){return u(g(t,0,i),e,i)},_=function(t,e,i,r){return m(u(t,i,r),f(e,i,r))};var v={resize:l,move:c,center:function(t,e){return o(o({},t),{},{left:(e.width-t.width)/2,top:(e.height-t.height)/2})},rotate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=i*Math.PI/180;return{left:Math.round(Math.cos(r)*(t.left-e.left)-Math.sin(r)*(t.top-e.top)+e.left),top:Math.round(Math.sin(r)*(t.left-e.left)+Math.cos(r)*(t.top-e.top)+e.top)}},relativeToAbsolute:d,absoluteToRelative:m,invertPosition:function(t,e){var i=("left"in e?e.left:0)+("width"in e?e.width:0),r=("top"in e?e.top:0)+("height"in e?e.height:0);return{right:i-t.left-t.width,bottom:r-t.top-t.height,width:t.width,height:t.height}},confine:function(t,e){var i="left"in e&&"top"in e?e:{top:0,left:0},r=m(t,i),n=o(o({},t),{},{left:r.left<0?0:r.left+r.width>e.width?e.width-t.width:r.left,top:r.top<0?0:r.top+r.height>e.height?e.height-t.height:r.top});return d(n,i)},cover:function(t,e){if(e.width/e.height>t.width/t.height){var i=t.width/e.width;return{width:t.width,height:e.height*i}}var r=t.height/e.height;return{width:e.width*r,height:t.height}},normalizePosition:function(t,e){return{left:e.width-t.right-t.width,top:e.height-t.bottom-t.height,width:t.width,height:t.height}},mapFromDocumentToViewport:function(t,e,i,r){var s=r?{left:r.scrollLeft,top:r.scrollTop}:(0,n.wA)();return m(l(t,i*e),s)},mapFromViewportToDocument:u,mapPointerToViewport:p,mapPointerToDocument:function(t,e,i){return l({left:t.pageX,top:t.pageY},1/e/i)},mapPointerToElement:function(t,e,i,r){return _(p(t,0,r),e,1,r)},mapElementToViewport:g,mapElementToDocument:f,mapFromViewportToElement:_,isPointInBox:function(t,e){return Boolean(e.left<=t.left&&t.left<=e.left+e.width&&e.top<=t.top&&t.top<=e.top+e.height)}};e.Z=v},926:function(t,e,i){if(i.d(e,{Dz:function(){return c},Op:function(){return m},Wv:function(){return u},cx:function(){return d},oJ:function(){return h},pB:function(){return l},tZ:function(){return p},wA:function(){return o}}),0==i.j)var r=i(889);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,s,a,o=[],h=!0,l=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(r=s.call(i)).done)&&(o.push(r.value),o.length!==e);h=!0);}catch(t){l=!0,n=t}finally{try{if(!h&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw n}}return o}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function o(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}}function h(t){var e=t.offsetParent,i=t.offsetTop;return e?i||h(e):i||0}function l(t){var e=t.offsetParent,i=t.offsetLeft;return e?i||l(e):i||0}function c(t){if(!t)return{left:0,top:0,width:0,height:0};var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}function d(t,e){for(var i,r=document.createElement(e);t.firstChild;)r.appendChild(t.firstChild);Array.from(t.attributes).forEach((function(t){r.setAttribute(t.nodeName,t.nodeValue||"")})),null===(i=t.parentNode)||void 0===i||i.replaceChild(r,t)}function m(t){var e=t.height/t.width,i=window.innerHeight,r=window.innerWidth,n=i/e,s=n*e;return n>r&&(s=(n=r)*e),{width:n,height:s}}function u(t,e){if(t)for(var i=0,s=Object.entries(e);i<s.length;i++){var a=n(s[i],2),o=a[0],h=a[1];t.style.setProperty((0,r.o)(o),h)}}function p(t){var e=t.element,i=t.events,r=t.callback;if(!e)return function(){};var n,a=[],o=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){h=!0,a=t},f:function(){try{o||null==i.return||i.return()}finally{if(h)throw a}}}}(i);try{var h=function(){var t=n.value;e.addEventListener(t,r),a.push((function(){return null==e?void 0:e.removeEventListener(t,r)}))};for(o.s();!(n=o.n()).done;)h()}catch(t){o.e(t)}finally{o.f()}return function(){for(var t=0,e=a;t<e.length;t++){var i=e[t];"function"==typeof i&&i()}}}},1357:function(t,e,i){i.d(e,{Z:function(){return B}});var r,n=i(848),s=i(311),a=i(335),o=i.n(a),h=i(320),l=i(609),c=i(339),d=i(338),m=i(617);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var p,g,f,_,v,w=(p={},g="template-common-slideshow-player",f=(0,m.f)(r||(_=['\n\t<div class="common-slideshow <%- newSlideshowCaptions ? \'common-slideshow-v2\' : \'\'%> environment-<%-tp%>">\n\t\t<div class="images no-rmswipe">\n\t\t\t<div class="images-wrapper">\n\t\t\t</div>\n\t\t\t<div class="fullscreen">\n\t\t\t\t<svg class="fullscreen-off" width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\t\t<g id="Page-1" stroke="none" stroke-width="0.1" fill="none" fill-rule="evenodd">\n\t\t\t\t\t\t<g id="full-screen" transform="translate(-12.000000, -12.000000)" fill="#F4F4F4" fill-rule="nonzero">\n\t\t\t\t\t\t\t<g id="Arrows" transform="translate(12.000000, 12.000000)">\n\t\t\t\t\t\t\t\t<path d="M12.7571068,4.74264069 L10.2571068,7.24264069 C9.86658249,7.63316498 9.23341751,7.63316498 8.84289322,7.24264069 C8.45236893,6.8521164 8.45236893,6.21895142 8.84289322,5.82842712 L11.3428932,3.32842712 L9.72157288,1.70710678 C9.33104858,1.31658249 9.33104858,0.683417511 9.72157288,0.292893219 C9.90910925,0.10535684 10.1634632,-2.93098879e-14 10.4286797,-2.93098879e-14 L15.0144661,-2.93098879e-14 C15.5667508,-2.93098879e-14 16.0144661,0.44771525 16.0144661,1 L16.0144661,5.58578644 C16.0144661,6.13807119 15.5667508,6.58578644 15.0144661,6.58578644 C14.7492496,6.58578644 14.4948957,6.4804296 14.3073593,6.29289322 L12.7571068,4.74264069 Z" id="Combined-Shape"></path>\n\t\t\t\t\t\t\t\t<path d="M4.20710669,13.2426408 L1.70710669,15.7426408 C1.3165824,16.1331651 0.683417421,16.1331651 0.292893129,15.7426408 C-0.097631163,15.3521165 -0.097631163,14.7189515 0.292893129,14.3284272 L2.79289313,11.8284272 L1.17157279,10.2071069 C0.781048494,9.81658256 0.781048494,9.18341758 1.17157279,8.79289329 C1.35910916,8.60535691 1.61346308,8.50000007 1.87867957,8.50000007 L6.464466,8.50000007 C7.01675075,8.50000007 7.464466,8.94771532 7.464466,9.50000007 L7.464466,14.0857865 C7.464466,14.6380713 7.01675075,15.0857865 6.464466,15.0857865 C6.19924951,15.0857865 5.9448956,14.9804297 5.75735922,14.7928933 L4.20710669,13.2426408 Z" id="Combined-Shape" transform="translate(3.732233, 12.267767) rotate(180.000000) translate(-3.732233, -12.267767) "></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t\t<svg class="fullscreen-on" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\t\t<g id="Page-1" stroke="none" stroke-width="0.1" fill="none" fill-rule="evenodd">\n\t\t\t\t\t\t<g id="full-screen" transform="translate(-11.000000, -11.000000)" fill="#F4F4F4" fill-rule="nonzero">\n\t\t\t\t\t\t\t<g id="Arrows" transform="translate(11.000000, 11.000000)">\n\t\t\t\t\t\t\t\t<path d="M14.2071067,5.24264078 L11.7071067,7.74264078 C11.3165824,8.13316507 10.6834174,8.13316507 10.2928931,7.74264078 C9.90236883,7.35211649 9.90236883,6.71895151 10.2928931,6.32842721 L12.7928931,3.82842721 L11.1715728,2.20710687 C10.7810485,1.81658258 10.7810485,1.1834176 11.1715728,0.792893312 C11.3591092,0.605356933 11.6134631,0.500000093 11.8786796,0.500000093 L16.464466,0.500000093 C17.0167507,0.500000093 17.464466,0.947715343 17.464466,1.50000009 L17.464466,6.08578653 C17.464466,6.63807128 17.0167507,7.08578653 16.464466,7.08578653 C16.1992495,7.08578653 15.9448956,6.98042969 15.7573592,6.79289331 L14.2071067,5.24264078 Z" id="Combined-Shape" transform="translate(13.732233, 4.267767) rotate(180.000000) translate(-13.732233, -4.267767) "></path>\n\t\t\t\t\t\t\t\t<path d="M4.70710678,14.7426407 L2.20710678,17.2426407 C1.81658249,17.633165 1.18341751,17.633165 0.792893219,17.2426407 C0.402368927,16.8521164 0.402368927,16.2189514 0.792893219,15.8284271 L3.29289322,13.3284271 L1.67157288,11.7071068 C1.28104858,11.3165825 1.28104858,10.6834175 1.67157288,10.2928932 C1.85910925,10.1053568 2.11346317,10 2.37867966,10 L6.96446609,10 C7.51675084,10 7.96446609,10.4477153 7.96446609,11 L7.96446609,15.5857864 C7.96446609,16.1380712 7.51675084,16.5857864 6.96446609,16.5857864 C6.6992496,16.5857864 6.44489569,16.4804296 6.25735931,16.2928932 L4.70710678,14.7426407 Z" id="Combined-Shape"></path>\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<div class="bottom-arrows">\n\t\t\t\t\t<div class="prev-picture-arrow-bottom arrow-bottom">\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="40" height="40">\n\t\t\t\t\t\t\t<path d="M23.5 11.5 L15.5 19.5 L23.5 27.5" stroke-linejoin="round" stroke-linecap="round" style="fill:none; stroke:#ffffff; stroke-width:3px"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="counters-container">\n\t\t\t\t\t\t<div class="counters-numbers">\n\t\t\t\t\t\t\t<span class="counters-text-current">1</span>/<span class="counters-text-total">2</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="counters-dots no-rmswipe">\n\t\t\t\t\t\t\t<div class="scroll-wrapper">\n\t\t\t\t\t\t\t\t<div class="items-wrapper has-horizontal-scroll">\n\t\t\t\t\t\t\t\t\t<div class="items">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="scroll"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="next-picture-arrow-bottom arrow-bottom">\n\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="40" height="40">\n\t\t\t\t\t\t\t<path d="M16.5 11.5 L24.5 19.5 L16.5 27.5" stroke-linejoin="round" stroke-linecap="round" style="fill:none; stroke:#ffffff; stroke-width:3px"></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="cursor"></div>\n\n\t\t\t<div class="prev-picture-arrow-middle arrow-middle" role="button" aria-label="Previous slide">\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="40" height="40">\n\t\t\t\t\t<path d="M23.5 11.5 L15.5 19.5 L23.5 27.5" stroke-linejoin="round" stroke-linecap="round" style="fill:none; stroke:#ffffff; stroke-width:3px"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<div class="next-picture-arrow-middle arrow-middle" role="button" aria-label="Next slide">\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="40" height="40">\n\t\t\t\t\t<path d="M16.5 11.5 L24.5 19.5 L16.5 27.5" stroke-linejoin="round" stroke-linecap="round" style="fill:none; stroke:#ffffff; stroke-width:3px"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="thumbnails no-rmswipe">\n\t\t\t<div class="scroll-wrapper">\n\t\t\t\t<div class="items-wrapper has-horizontal-scroll">\n\t\t\t\t\t<div class="items">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="scroll"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="captions">\n\t\t\t<% if (tp == \'constructor\') { %>\n\t\t\t\t<% if (newSlideshowCaptions) { %>\n\t\t\t\t\t<div class="caption caption-text-w"></div>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<textarea class="caption" maxlength="9999" placeholder="Type image caption here"></textarea>\n\t\t\t\t<% } %>\n\t\t\t<% } %>\n\t\t</div>\n\n\t\t<style id="slideshow-custom-styles-<%- id %>" type="text/css"></style>\n\t</div>\n\n'],v||(v=_.slice(0)),r=Object.freeze(Object.defineProperties(_,{raw:{value:Object.freeze(v)}})))),(g=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(g))in p?Object.defineProperty(p,g,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[g]=f,p),y=i(322),b=i(1044),I=i(667),T=i(923),x=i(610),$=i(902),P=i(901),S=i(681),C=i(911),A=i(1358),D=i(625);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function k(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(i),!0).forEach((function(e){N(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function N(t,e,i){return(e=function(t){var e=function(t,e){if("object"!==L(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===L(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function U(){U=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function l(t,e,i,n){var s=e&&e.prototype instanceof m?e:m,a=Object.create(s.prototype),o=new $(n||[]);return r(a,"_invoke",{value:b(t,i,o)}),a}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function m(){}function u(){}function p(){}var g={};h(g,s,(function(){return this}));var f=Object.getPrototypeOf,_=f&&f(f(P([])));_&&_!==e&&i.call(_,s)&&(g=_);var v=p.prototype=m.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function n(r,s,a,o){var h=c(t[r],t,s);if("throw"!==h.type){var l=h.arg,d=l.value;return d&&"object"==L(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,o)}),(function(t){n("throw",t,a,o)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,o)}))}o(h.arg)}var s;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function b(t,e,i){var r="suspendedStart";return function(n,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw s;return S()}for(i.method=n,i.arg=s;;){var a=i.delegate;if(a){var o=I(a,i);if(o){if(o===d)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var h=c(t,e,i);if("normal"===h.type){if(r=i.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r="completed",i.method="throw",i.arg=h.arg)}}}function I(t,e){var i=e.method,r=t.iterator[i];if(void 0===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,d;var s=n.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return u.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:u,configurable:!0}),u.displayName=h(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===u||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,h(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},w(y.prototype),h(y.prototype,a,(function(){return this})),t.AsyncIterator=y,t.async=function(e,i,r,n,s){void 0===s&&(s=Promise);var a=new y(l(e,i,r,n),s);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),h(v,o,"Generator"),h(v,s,(function(){return this})),h(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),h=i.call(s,"finallyLoc");if(o&&h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),x(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;x(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:P(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function E(t,e,i,r,n,s,a){try{var o=t[s](a),h=o.value}catch(t){return void i(t)}o.done?e(h):Promise.resolve(h).then(r,n)}var H,R,j=o().View.extend({THUMBNAILS_HEIGHT:72,COUNTERS_HEIGHT:40,COUNTERS_ADDITIONAL_SPACE:30,COUNTER_WIDTH:14,THUMBNAIL_WIDTH:56,THUMBNAIL_PADDING:8,THUMBNAILS_PADDING:16,swipeStartDistance:5,scrollStartDistance:3,swipeDistance:35,IMG_ACCELERATION_DELAY:500,AUTOPLAY_DELAY:4,SLIDER_TRANSITION:.5,events:{"click .images .prev-picture-arrow-middle":"prevImage","click .images .next-picture-arrow-middle":"nextImage","click .images .prev-picture-arrow-bottom":"prevImage","click .images .next-picture-arrow-bottom":"nextImage","click .images .fullscreen":"toggleFullscreen","click .counters-dots .counter":"counterClick","click .thumbnails .thumb":"thumbnailClick","click .images":"onImageClick","blur .captions .caption":"onCaptionBlur","mousemove .images.mouseover":"onMouseMove","mouseover .images.mouseover.viewer":"onMouseMove","mouseout  .images.mouseover.viewer":"onMouseOut","mouseenter  .images.play-on-hover.viewer":"onMouseEnter","mousemove  .images.play-on-hover.viewer":"changeSlideonHover","mouseleave  .images.play-on-hover.viewer":"stopAutoplay"},initialize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.params,i=t.$container,r=t.environment,n=t.block,a=t.mag,o=t.page,l=t.viewport,c=t.textParams;h.Z.bindAll(this),this.template=w["template-common-slideshow-player"],this.block=n,this.model=n&&n.model,this.params=e,this.$container=i,this.environment=r,this.preloadImagesList=[],this.indexArr=[],this.mag=a,this.page=o,this.viewport=l,this.textParams=c,"constructor"===this.environment&&this.checkNeedUpdateWidget(),this.params.w=Math.ceil(this.params.w),this.handleCounters="constructor"===r||e.theme_data.counters&&"dots"===e.theme_data.counters_type||"theme_captions"===e.current_theme,this.handleThumbnails="constructor"===r||e.theme_data.thumbnails,this.currentPic={$el:null,num:null},this.initialRender=!0,this.lastClick=0,this.slidesDirection="",this.render(),this.applyVisualState(e),this.applyPictures(e);var d="viewer"!==this.environment||2===this.params.version;d||this.applyTextStyles(e);var m=this.params.pictures||[];if(this.handleCounters&&this.$counters_container.css("width",m.length*this.COUNTER_WIDTH),this.$counters_container.children(":first-child").addClass("active"),this.handleThumbnails&&this.$thumbnails_container.css("width",m.length*(this.THUMBNAIL_WIDTH+this.THUMBNAIL_PADDING)-this.THUMBNAIL_PADDING),this.$thumbnails_container.children(":first-child").addClass("active"),this.recalcCounters(e),this.recalcThumbnails(e),this.moveToImage(this.currentImageID,!1,"change-pictures"),"viewer"===this.environment){var u,p,g=this.preloadImagesList.length;if(!g)return h.Z.defer(h.Z.bind((function(){this.trigger("ready")}),this));var f=h.Z.sortBy(m,"num"),_=f[0],v=b.Z.getLqipUrl(_);if(v&&null!==(u=this.mag)&&void 0!==u&&null!==(p=u.viewOpts)&&void 0!==p&&p.lqip){var I=(0,s.ZP)("<div>").addClass("lqip-wrapper").css({height:"".concat(this.params.images_h,"px"),"border-radius":e.theme_data.radius?"".concat(e.theme_data.radius,"px"):""});(0,s.ZP)("<div>").addClass("lqip").css({transform:"scale(".concat(e.theme_data.fill?1.1:.97,")"),"border-radius":e.theme_data.radius?"".concat(e.theme_data.radius,"px"):"","background-image":"url(".concat(v,")"),"background-size":this.setImageSize(e.theme_data.fill,_.width,_.height,e.w,e.images_h)}).appendTo(I),I.prependTo(this.$images),this.$images.addClass("lqip")}var T=h.Z.bind((function(){--g||this.isDestroyed||(this.$images.hasClass("lqip")&&(this.$images.find(".lqip-wrapper").remove(),this.$images.removeClass("lqip")),this.loadRemainingImages(),this.trigger("ready"))}),this);h.Z.each(this.preloadImagesList,(function(t){this.isDestroyed||(t.preload=new Image,(0,s.ZP)(t.preload).on("load",T).on("error",T),t.preload.src=t.url)}),this)}this.$container.append(this.$el),this.initialRender=!1,this.handleCounters&&y.Z.isDesktop&&(this.counters_scroll=this.$counters_scroll_wrapper.RMScroll({$container:this.$counters.find(".items-wrapper"),$content:this.$counters_container,$handle:this.$counters.find(".scroll"),wheelScrollSpeed:.1,scrollStep:14,tp:"horizontal",needRecalc:!1}).data("scroll")),this.handleThumbnails&&(y.Z.isDesktop?this.thumbnails_scroll=this.$thumbnails_scroll_wrapper.RMScroll({$container:this.$thumbnails.find(".items-wrapper"),$content:this.$thumbnails_container,$handle:this.$thumbnails.find(".scroll"),wheelScrollSpeed:.3,onScroll:this.preloadThumbImages,tp:"horizontal",needRecalc:!1}).data("scroll"):this.$thumbnails.find(".items-wrapper").bind("scroll",this.preloadThumbImages)),this.setSwipeAction()},render:(H=U().mark((function t(){var e,r,n,a,o=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="viewer"!==this.environment||2===this.params.version,this.setElement((0,s.ZP)(this.template({id:this.params._id,tp:this.environment,newSlideshowCaptions:e}))),this.$customStyles=this.$el.find("#slideshow-custom-styles-".concat(this.params._id)),this.$el.attr("data-id",this.params._id),this.$images=this.$(".images"),this.$images_wrapper=this.$images.find(".images-wrapper"),this.$middle_arrows=this.$images.find(".arrow-middle"),this.$bottom_arrows=this.$images.find(".arrow-bottom"),this.$bottom_arrows_container=this.$images.find(".bottom-arrows"),this.$counters=this.$(".counters-dots"),this.$counters_container=this.$counters.find(".items"),this.$counters_scroll_wrapper=this.$counters.find(".scroll-wrapper"),this.$thumbnails=this.$(".thumbnails"),this.$thumbnails_container=this.$thumbnails.find(".items"),this.$thumbnails_scroll_wrapper=this.$thumbnails.find(".scroll-wrapper"),this.$captions=this.$(".captions"),"constructor"!==this.environment){t.next=24;break}return this.textWidgetWrapper=this.$captions.find(".caption"),t.next=20,Promise.resolve().then(i.bind(i,1241));case 20:r=t.sent,n=r.default,a=function(){return(0,D.jsx)($.CreateContextProvider,{context:P.x,model:o.textParams.propsModel,children:(0,D.jsx)(n,{})})},(0,$.renderReact)({component:a,domElement:this.textWidgetWrapper[0],model:this.textParams.model});case 24:case"end":return t.stop()}}),t,this)})),R=function(){var t=this,e=arguments;return new Promise((function(i,r){var n=H.apply(t,e);function s(t){E(n,i,r,s,a,"next",t)}function a(t){E(n,i,r,s,a,"throw",t)}s(void 0)}))},function(){return R.apply(this,arguments)}),checkNeedUpdateWidget:function(){var t=(0,A.v)((0,x._k)("widget.viewportProxy")?this.model.cloneJSON():h.Z.cloneWithObjects(this.model.attributes));t&&!h.Z.isEmpty(t)&&this.model.set(t,{silent:!0})},loadRemainingImages:function(t){var e,i;if(e=(t=t||this.$images_wrapper.children().filter((function(){return(0,s.ZP)(this).attr("data-src")})).toArray()).length<2?t.length:2,t&&t.length)for(i=0;i<=e;i++)this.preloadPictures(t,i,e)},preloadPictures:function(t,e,i){var r=new Image,n=this;if(t&&t[e]&&t[e].hasAttribute("data-src")){var a=(0,s.ZP)(t[e]).attr("data-src");r.onload=function(){(0,s.ZP)(t[e]).css({"background-image":'url("'+a+'")'}).removeAttr("data-src"),n.indexArr.push(e),n.indexArr.length-1===i&&(t.splice(0,i+1),n.indexArr=[],n.loadRemainingImages(t))},r.src=(0,s.ZP)(t[e]).attr("data-src")}},applyCustomStyles:function(t){if(this.$customStyles){var e="";t.cursorStyle&&(e+='\n          .common-slideshow[data-id="'.concat(t._id,'"] .thumbnails .scroll-wrapper .items-wrapper .items .thumb.active {\n            cursor: ').concat(t.cursorStyle,';\n          }\n          .common-slideshow[data-id="').concat(t._id,'"] .images .bottom-arrows .counters-container {\n            cursor: ').concat(t.cursorStyle,";\n          }\n        ")),e&&this.$customStyles.text(e)}},applyVisualState:function(t,e){if(t.theme_data){var i={w:e?e.w:t.w,h:e?e.h:t.h,images_h:e?e.images_h:t.images_h,captions_h:e?e.captions_h:t.captions_h,thumbnails_h:this.THUMBNAILS_HEIGHT,counters_h:this.COUNTERS_HEIGHT,left_icon_noun:t.theme_data.left_icon_noun,right_icon_noun:t.theme_data.right_icon_noun,theme:t.current_theme,play_method:t.play_method,current_mode:t.current_mode,thumbnails:t.theme_data.thumbnails,arrows_type:t.theme_data.arrows_type,arrows_position:t.theme_data.arrows_position,arrows_view_mode:t.theme_data.arrows_view_mode,active_arrows:t.active_arrows,captions:t.theme_data.captions,counters:t.theme_data.counters,counters_type:t.theme_data.counters_type,counters_position:t.theme_data.counters_position,controls_bg:t.theme_data.controls_bg,show_on_hover:t.theme_data.show_on_hover,pictures:t.pictures,radius:t.theme_data.radius,transition_type:t.transition_type};i.showThumbnails=i.thumbnails,i.showCounters=i.counters,i.showCaptions=i.captions,i.showFullscreen=t.theme_data.fullscreen,i.showArrows=t.theme_data.arrows,void 0!==i.showArrows?(i.showBtmArrows=i.showArrows&&(i.arrows_position?"bottom"===i.arrows_position:i.active_arrows?"bottom"===i.active_arrows:"theme_classic"===i.theme)&&"normal"===i.arrows_view_mode,i.showMdlArrows=i.showArrows&&(i.arrows_position?"sides"===i.arrows_position:i.active_arrows?"middle"===i.active_arrows:"theme_captions"===i.theme)&&"normal"===i.arrows_view_mode):(i.showBtmArrows="theme_classic"===i.theme,i.showMdlArrows="theme_captions"===i.theme);var r=["rm_left_3","rm_left_4","rm_left_5","rm_left_6","rm_left_7","rm_left_8","rm_left_9","rm_left_10","rm_left_11","rm_left_12","rm_left_13","rm_left_14","rm_right_3","rm_right_4","rm_right_5","rm_right_6","rm_right_7","rm_right_8","rm_right_9","rm_right_10","rm_right_11","rm_right_12","rm_right_13","rm_right_14"],n=["rm_left_15","rm_left_16","rm_left_17","rm_left_20","rm_right_15","rm_right_16","rm_right_17","rm_right_20"],a=i.left_icon_noun&&i.left_icon_noun.rm_id,o=i.right_icon_noun&&i.right_icon_noun.rm_id,l=this.$el.find(".prev-picture-arrow-middle"),c=this.$el.find(".next-picture-arrow-middle");l.toggleClass("first-pack",r.includes(a)).toggleClass("second-pack",n.includes(a)),a?l.attr("data-id",a):l[0].hasAttribute("data-id")&&l.removeAttr("data-id"),c.toggleClass("first-pack",r.includes(o)).toggleClass("second-pack",n.includes(o)),o?c.attr("data-id",o):c[0].hasAttribute("data-id")&&c.removeAttr("data-id"),this.$images.css("height",i.images_h),this.$thumbnails.css({display:i.showThumbnails?"block":"none",height:i.thumbnails_h}),this.$counters.css({display:i.showCounters&&(i.counters_type?"dots"===i.counters_type:"theme_captions"===i.theme)?"block":"none",height:i.counters_h}),this.$captions.css({display:i.showCaptions||"theme_captions"===i.theme?"block":"none",height:i.captions_h}),this.$images.find(".fullscreen").toggle(i.showFullscreen),!i.theme||"theme_captions"!==i.theme||i.active_arrows||i.counters_type&&"dots"!==i.counters_type||this.setDotsPosition("middle"),void 0!==i.arrows_type&&this.$images.toggleClass("noun",i.showArrows&&("library"===i.arrows_type||"noun"===i.arrows_type)),void 0!==i.arrows_view_mode&&this.$images.toggleClass("mouseover",i.showArrows&&"mouseover"===i.arrows_view_mode),void 0!==i.show_on_hover&&(this.$images.toggleClass("show-on-hover",i.show_on_hover),this.$counters.toggleClass("show-on-hover",i.show_on_hover)),void 0!==i.controls_bg&&this.$images.toggleClass("controls-without-bg",!i.controls_bg),void 0!==i.play_method&&this.$images.toggleClass("play-on-hover","hover"===i.play_method),this.$images.toggleClass("viewer","viewer"===this.environment),"mouseover"!==i.arrows_view_mode&&this.$images.css("cursor",this.params.cursor||""),this.$bottom_arrows.toggle(i.showBtmArrows),this.$middle_arrows.toggle(i.showMdlArrows),this.$bottom_arrows_container.toggleClass("only-counters","sides"===i.arrows_position||"middle"===i.active_arrows||!1===i.showArrows||"mouseover"===i.arrows_view_mode),this.$images.find(".counters-numbers").toggle(i.showCounters&&(i.counters_type?"numbers"===i.counters_type:"theme_classic"===i.theme)),"dots"===i.counters_type&&this.setDotsPosition(i.counters_position?i.counters_position:i.active_arrows);var d=t.theme_data,m=this.getRGBA(d.controls_color,d.controls_opacity),u=this.getRGBA(d.background_color,d.background_opacity);if(this.colorArrows(d.controls_color,d.controls_opacity),this.$("svg #full-screen").css("fill",m),this.$(".counters-numbers").css("color",m),"dots"===i.counters_type&&"inside"===i.counters_position&&h.Z.defer(function(){this.$counters.find(".counter").css({background:m,"border-color":m})}.bind(this)),this.$images.css("background",u),this.$thumbnails.css("background",u),this.setPicsTransitions(),this.setNewPicsWidths(i.w),this.$images_wrapper.toggleClass("crossfade","crossfade"===i.transition_type),this.$images_wrapper.css({"border-radius":i.radius}),this.$images_wrapper.children(".image").each(h.Z.bind((function(t,e){var r=(0,s.ZP)(e);r.css({"background-size":this.setImageSize(d.fill,r.attr("data-width"),r.attr("data-height"),i.w,i.images_h),"border-radius":i.radius})}),this)),!this.initialRender){var p=t.pictures||[];this.handleCounters&&this.$counters_container.css("width",p.length*this.COUNTER_WIDTH),this.handleThumbnails&&this.$thumbnails_container.css("width",p.length*(this.THUMBNAIL_WIDTH+this.THUMBNAIL_PADDING)-this.THUMBNAIL_PADDING),this.recalcCounters(t,e),this.recalcThumbnails(t,e),this.moveToImage(this.currentImageID,!1,"change-visual-style")}this.applyCustomStyles(t)}},onMouseMove:function(t){var e=this.$images,i=this.getIconUrl().leftArrUrl,r=this.getIconUrl().rightArrUrl,n=this.isLeftSideOfWidget(t)?i:r,a=this.$el.find(".cursor"),o=this.getScale();if("constructor"===this.environment)Modernizr.safari&&(t.currentTarget.style.cursor=""),(0,s.ZP)(t.currentTarget).css({cursor:"url('".concat(n,"') 18 18, pointer")});else if((0,s.ZP)(t.target).hasClass("image")||(0,s.ZP)(t.target).hasClass("images-wrapper")||(0,s.ZP)(t.target).hasClass("bottom-arrows")){var h=l.Z.isCSSZoom()?o:1,c=l.Z.isCSSTransform()?o:1,d=T.Z.mapElementToDocument(e[0],c,h),m=T.Z.mapPointerToDocument(t,c,h),u=T.Z.absoluteToRelative(m,d);a.show().css(O(O({},u),{},{cursor:"none","background-image":"url('".concat(n,"')")})),(0,s.ZP)(t.currentTarget).css({cursor:"none"})}else a.css({"background-image":"none"})},onMouseOut:function(){this.$el.find(".cursor").hide()},getIconUrl:function(){var t,e,i,r=this.getModelData("theme_data").arrows_type;return"constructor"===this.environment||"viewer"===this.environment&&"default"===r?(t=this.sanitizeSVG(this.$bottom_arrows.find("svg").first()),e=this.sanitizeSVG(this.$bottom_arrows.find("svg").last())):(t=("bottom"===(i=this.params.theme_data.arrows_position)?this.$el.find(".prev-picture-arrow-bottom img"):this.$el.find(".prev-picture-arrow-middle img")).attr("src"),e=("bottom"===i?this.$el.find(".next-picture-arrow-bottom img"):this.$el.find(".next-picture-arrow-middle img")).attr("src")),{leftArrUrl:t,rightArrUrl:e}},sanitizeSVG:function(t){var e=("constructor"===this.environment?this.model.get("theme_data"):this.params.theme_data).arrows_type,i="data:image/svg+xml;charset=utf-8,";return"library"!==e&&"noun"!==e||t.attr({height:"36",width:"36"}),i+=t[0].outerHTML.replace(/#/g,"%23").replace(/(\r\n|\n|\r)/gm,"")},colorArrows:function(t,e){var i=this.getRGBA(t,e);this.$("svg path").css("stroke",i),this.$("svg").css("fill",i)},setDotsPosition:function(t){var e,i;"middle"!==t&&"outside"!==t||(this.$counters.remove(),this.$thumbnails.after(this.$counters),this.$counters.addClass("down-position"),this.$counters.find(".counter").css("background","#fff")),this.$thumbnails.next(".counters-dots").length&&this.$thumbnails.next(".counters-dots").length>0&&("bottom"===t||"inside"===t)&&(this.$counters.remove(),this.$images.find(".counters-numbers").after(this.$counters),this.$counters.removeClass("down-position"),"constructor"===this.environment&&(e=this.model.get("theme_data"),i=this.getRGBA(e.controls_color,e.controls_opacity),this.$counters.find(".counter").css("background",i)))},getRGBA:function(t,e){var i=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)];return e>.99?"rgb("+i[0]+","+i[1]+","+i[2]+")":"rgba("+i[0]+","+i[1]+","+i[2]+", "+e+")"},getThumbUrl:function(t){if(!b.Z.useLambdaUrl(t))return t.thumbUrl;var e={width:d.ZP.THUMB_SIZE_SLIDESHOW,height:d.ZP.THUMB_SIZE_SLIDESHOW,originalW:t.width,originalH:t.height};return"constructor"!==this.environment&&(e.scale=this.mag.getScale(this.viewport)),b.Z.getThumbnailUrl(t,e)},getOriginalUrl:function(t){return t.rasterUrl||t.url},getModelData:function(t){return"constructor"===this.environment?this.model.get(t):this.params[t]},getScaledUrl:function(t){var e=this.getModelData("theme_data");if(b.Z.useLambdaUrl(t)||b.Z.useLambdaUrlOldProjects(t,"slideshow")){var i=this.getModelData("images_h"),r=I.Z.normalizeAnimations(this.getModelData("animation")).reduce((function(t,e){return Math.max(t,I.Z.maxScaleAnimation(e))}),0),n={originalW:t.width,originalH:t.height};return e.fullscreen||(n.height=i,n.scale="constructor"===this.environment?RM.constructorRouter.zoom.getZoom():this.mag.getScale(this.viewport),n.animationScale=r&&r/100),b.Z.getLambdaUrl(t,n)}return l.Z.isOn(this.viewport,this.mag.getViewportWidth(this.viewport),"constructor"===this.environment?this.mag.get("opts"):this.mag.viewOpts)||e.fullscreen?t.unscaledOptimizedUrl||t.rasterUrl||t.url:Modernizr.retina?t.scaled2xUrl||t.unscaledOptimizedUrl||t.rasterUrl||t.url:t.scaledUrl||t.unscaledOptimizedUrl||t.rasterUrl||t.url},applyPictures:function(t){var e=this;if(t.theme_data){var i,r,n=t.pictures||[];this.$el.toggleClass("no-images",!n.length),this.$bottom_arrows_container.toggleClass("no-images",n.length<=1),this.$middle_arrows.toggleClass("no-images",n.length<=1),this.$images.find(".bottom-arrows .counters-text-total").text(n.length),this.$images_wrapper.empty(),this.handleCounters&&this.$counters_container.empty(),this.handleThumbnails&&this.$thumbnails_container.empty(),(n=h.Z.sortBy(n,"num")).length>1&&n.length<4&&(r=k(n).map((function(t){var e=O({},t);return e.fakedId=c.Z.generateUUID(),e.faked=!0,e})),i=s.ZP.merge(n,r));for(var a=function(){m=n[l],(d=(0,s.ZP)("<div>").addClass("image").attr("data-id",m.fakedId?m.fakedId:m.id).toggleClass("error",!!m.error).css({"background-size":e.setImageSize(t.theme_data.fill,m.width,m.height,t.w,t.images_h)}).appendTo(e.$images_wrapper)).attr("role","img");var i=e.getModelData("commonAlt");if("string"==typeof i?d.attr("aria-label",h.Z.escape(i)):"string"==typeof m.alt&&d.attr("aria-label",h.Z.escape(m.alt)),m.fakedId&&d.attr("data-original-id",m.id),"constructor"===e.environment&&d.css({"background-image":m.url?'url("'+e.getScaledUrl(m)+'")':"none"}),"viewer"===e.environment&&m.url&&(d.attr("data-src",e.getScaledUrl(m)),m.scaledUrl&&d.data("orig-src",e.getOriginalUrl(m))),m.url&&m.width&&m.height&&d.attr("data-width",m.width).attr("data-height",m.height),e.handleThumbnails&&!m.faked){d=(0,s.ZP)("<div>").addClass("thumb").attr("data-id",m.id).toggleClass("error",!!m.error).css({left:(e.THUMBNAIL_WIDTH+e.THUMBNAIL_PADDING)*l-e.THUMBNAIL_PADDING/2}).appendTo(e.$thumbnails_container);var r=e.getThumbUrl(m);"constructor"===e.environment&&d.css({"background-image":r?'url("'.concat(r,'")'):"none"}),"viewer"===e.environment&&r&&d.attr("data-src",r)}if(e.handleCounters&&!m.faked&&(0,s.ZP)("<div>").addClass("counter").attr("data-id",m.id).css({left:e.COUNTER_WIDTH*l}).appendTo(e.$counters_container),(e.params.theme_data.captions||"theme_captions"===e.params.current_theme)&&"viewer"===e.environment&&!m.faked){var a=(0,s.ZP)("<div>").addClass("caption-wrapper").attr("data-id",m.id);if(m.caption){var u=(0,s.ZP)("<div>").addClass("caption caption-text-w").appendTo(a),p=new(o().Model)({page:e.page,currentPage:e.mag.currentPage||e.page,scale:e.page.scale,viewport:e.viewport,viewerOptions:e.mag.viewOpts,mag:e.mag}),g=new(o().Model)(m.caption),f=S.Z.createStateFromModel(g);(0,$.renderReact)({component:function(){return(0,D.jsx)($.CreateContextProvider,{context:P.T,model:p,children:(0,D.jsx)(C.Z,{editorState:f})})},domElement:u[0],model:g})}else(0,s.ZP)("<div>").addClass("caption").html(c.Z.plainTextToHtml(m.text,{detectLinks:!0})).appendTo(a);a.appendTo(e.$captions)}},l=0;l<(i?i.length:n.length);l++){var d,m;a()}this.$images_wrapper.children(":first-child").data("first-child",!0),this.$images_wrapper.children(":last-child").data("last-child",!0),this.updateCurrentImageID(t),this.initialRender||(this.handleCounters&&this.$counters_container.css("width",n.length*this.COUNTER_WIDTH),this.handleThumbnails&&this.$thumbnails_container.css("width",n.length*(this.THUMBNAIL_WIDTH+this.THUMBNAIL_PADDING)-this.THUMBNAIL_PADDING),this.recalcCounters(t),this.recalcThumbnails(t),this.moveToImage(this.currentImageID,!1,"change-pictures")),n.length||this.$images.find(".bottom-arrows .counters-text .counters-text-current").html(0),this.$images_wrapper.children(".image").each(h.Z.bind((function(t,e){var i=(0,s.ZP)(e),r="viewer"===this.environment?this.params.theme_data.radius:this.model.get("theme_data").radius;i.css({"border-radius":r})}),this))}},applyTextStyles:function(t){var e=h.Z.omit(t.text_style,"size-leading-linked","size-leading-ratio");/px/i.test(e["font-size"])||(e["font-size"]+="px"),/px/i.test(e["letter-spacing"])||(e["letter-spacing"]+="px"),/px/i.test(e["line-height"])||(e["line-height"]+="px"),/#/i.test(e.color)||(e.color="#"+e.color),e.opacity/=100,this.$captions.find(".caption").css(e)},setNewPicsWidths:function(t){var e,i=this.mag.getViewportWidth(this.viewport),r=this.$el.find("#slideshow-images-position-style-"+this.params._id),n=y.Z.isDesktop?"":"translateZ(0)",a=l.Z.isOn(this.viewport,i,"constructor"===this.environment?this.mag.get("opts"):this.mag.viewOpts)?l.Z.getRatio(i):1;e=this.isSlider()?'          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper {\n            left: 0px;\n            width: '+t+'px;\n          }\n          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image {\n            left: 0px;\n            width: '+t+'px;\n          }\n          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.prev-image {\n            -webkit-transform: translateX('+-t+"px)"+n+";\n            transform: translateX("+-t+"px)"+n+';\n          }\n          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.center-image {\n            -webkit-transform: translateX(0) '+n+";\n            transform: translateX(0) "+n+';\n          }\n          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.next-image {\n            -webkit-transform: translateX('+t+"px)"+n+";\n            transform: translateX("+t+"px)"+n+';\n          }\n                    .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper {\n            left: 0px;\n            width: '+t+'px;\n          }\n          .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image {\n            left: 0px;\n            width: '+t+'px;\n          }\n          .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.prev-image {\n            -webkit-transform: translateX('+Math.ceil(-t*a)+"px) "+n+";\n            transform: translateX("+Math.ceil(-t*a)+"px) "+n+';\n          }\n          .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.center-image {\n            -webkit-transform: translateX(0) '+n+";\n            transform: translateX(0) "+n+';\n          }\n          .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.next-image {\n            -webkit-transform: translateX('+Math.ceil(t*a)+"px) "+n+";\n            transform: translateX("+Math.ceil(t*a)+"px) "+n+";\n        }\n      ":'      .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper {\n        left: 0px;\n        width: '+t+'px;\n      }\n      .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image {\n        left: 0px;\n        opacity: 0;        width: '+t+'px;\n      }\n      .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image.center-image {\n        opacity: 1;        }\n      .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper {\n        left: 0px;\n        width: '+t+'px;\n      }\n      .edge .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper .image {\n        left: 0px;\n        width: '+t+"px;\n      }\n      ",r.length||(r=(0,s.ZP)('<style id="slideshow-images-position-style-'+this.params._id+'" type="text/css">')).appendTo(this.$el),r.text(e)},getPlayMethod:function(){return"viewer"===this.environment?this.params.play_method:this.model.get("play_method")},getCrossfadeTransitionTime:function(){return("viewer"===this.environment?this.params.theme_data:this.model.get("theme_data")).crossfade},isSlider:function(){var t;return t="viewer"===this.environment&&this.params.transition_type?"slider"===this.params.transition_type:"constructor"!==this.environment||!this.model.get("transition_type")||"slider"===this.model.get("transition_type"),t},getTransitionsTime:function(){return this.isSlider()?this.getSliderTransitionTime():this.getCrossfadeTransitionTime()},getTransitionsDelay:function(){var t,e;return"viewer"===this.environment?(t=this.params.play_method,e=this.params.theme_data):(t=this.model.get("play_method"),e=this.model.get("theme_data")),1e3*("hover"===t?e.hover_delay:"autoplay"===t||e.autoplay?e.autoplay_delay:0)||this.AUTOPLAY_DELAY},setPicsTransitions:function(t,e){var i,r=this.$el.find("#slideshow-images-transition-style-"+this.params._id),n="cubic-bezier(0.40, 0.24, 0.40, 1)",a=this.isSlider()||"scroll"!==this.getPlayMethod()?"ease-in-out":"ease-out",o="prev"===e?"next":"prev",h=this.isSlider()&&"scroll"===this.getPlayMethod()?0:this.getTransitionsTime();t=t||h,i=this.isSlider()?'          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image {\n            -webkit-transition: transform '+t+"s "+n+";            transition: transform "+t+"s "+n+';          }\n          .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image.center-image {\n            -webkit-transition: transform '+(t-.05)+"s "+n+";            transition: transform "+(t-.05)+"s "+n+';        }\n        .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image.'+e+"-image {\n            -webkit-transition: transform 0s "+n+";        transition: transform 0s "+n+';        }\n        .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image.'+o+"-image {\n            -webkit-transition: transform "+t+"s "+n+";        transition: transform "+t+"s "+n+";        }\n        ":'        .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image {\n        -webkit-transition: opacity '+t+"s "+a+";        transition: opacity "+t+"s "+a+';        }\n        .common-slideshow[data-id="'+this.params._id+'"] .images .images-wrapper.enable-transitions .image.center-image {\n        -webkit-transition: opacity '+t+"s "+a+";        transition: opacity "+t+"s "+a+";        }\n        ",r.length||(r=(0,s.ZP)('<style id="slideshow-images-transition-style-'+this.params._id+'" type="text/css">')).appendTo(this.$el),r.text(i)},getSliderTransitionTime:function(){if(!RM.screenshot)return("viewer"===this.environment?this.params.theme_data.slider_transition:this.model.get("theme_data").slider_transition)||this.SLIDER_TRANSITION},setImageSize:function(t,e,i,r,n){return e&&i?t?(r/n>e/i?(s=r+2,a=Math.round(s*i/e)):(a=n+2,s=Math.round(a*e/i)),s+"px "+a+"px"):e<r&&i<n?e+"px "+i+"px":(r/n>e/i?(a=n+2,s=Math.round(a*e/i)):(s=r+2,a=Math.round(s*i/e)),s+"px "+a+"px"):t?"cover":"contain";var s,a},onCaptionBlur:function(){if("viewer"!==this.environment&&this.model){var t=this.$captions.find(".caption").val(),e=h.Z.clone(this.model.get("pictures")),i=h.Z.findWhere(e,{id:this.$captions.find(".caption").attr("data-id")});if(i&&i.text!==t){var r=e.indexOf(i);e[r]=h.Z.extend({},i,{text:t}),this.model.save({pictures:e},{toHistory:!0}),this.block.workspace.trigger("redraw")}}},recalcCounters:function(t,e){if("dots"===t.theme_data.counters_type||"theme_captions"===t.current_theme){var i=t.pictures||[],r=e?e.w:t.w,n=this.COUNTER_WIDTH*i.length,s=Math.floor(r/this.COUNTER_WIDTH)*this.COUNTER_WIDTH,a=this.$bottom_arrows_container.hasClass("only-counters")&&i.length>2?this.COUNTERS_ADDITIONAL_SPACE:0,o=Math.min(n,s)+a,h=(t.theme_data.counters_position?"outside"===t.theme_data.counters_position:t.active_arrows?"middle"===t.active_arrows:"theme_captions"===t.current_theme)?Math.floor((r-o)/2):0;this.$counters_scroll_wrapper.css({left:h,width:o}),this.$counters_container.css({width:n})}},recalcThumbnails:function(t,e){if(t.theme_data.thumbnails){var i=t.pictures||[],r=e?e.w:t.w,n=i.length*(this.THUMBNAIL_WIDTH+this.THUMBNAIL_PADDING)-this.THUMBNAIL_PADDING,s=Math.min(n,r-this.THUMBNAILS_PADDING),a=Math.floor((r-s)/2);this.thumbsWidth=s,this.$thumbnails_scroll_wrapper.css({left:a,width:s}),this.$thumbnails_container.css({width:n})}},onImageClick:function(t){var e;this.isNormalArrowsMode()||this.block&&!this.block.selected||(t&&t.stopPropagation(),"hover"===this.getPlayMethod()&&(e="switch-to-image-autoplay"),this.isLeftSideOfWidget(t)?this.prevImage(t,e):this.nextImage(t,e))},isLeftSideOfWidget:function(t){var e=this.$images,i=this.getScale(),r=l.Z.getBox(e.get(0)),n="constructor"!==this.environment&&l.Z.isCSSTransform()?i:1,a=y.Z.isDesktop&&("constructor"===this.environment||l.Z.isCSSZoom())?i:1;return t.clientX/a/n<(r.left+(this.isFullscreenMode?(0,s.ZP)(window).width():r.width)/2)/n},isNormalArrowsMode:function(){return"constructor"===this.environment&&this.model.get("theme_data")&&"normal"===this.model.get("theme_data").arrows_view_mode},getScale:function(){return this.isFullscreenMode?1:"constructor"===this.environment?RM.constructorRouter.zoom.getZoom():this.mag.getScale(this.viewport)},prevImage:function(t,e){this.imagePrevNext(t,"prev",e||"switch-to-image")},checkNeedUpdateTransition:function(t,e){var i,r=this.getTransitionsTime(),n=this.$images_wrapper.children(":first").css("transition-duration")?parseFloat(this.$images_wrapper.children(":first").css("transition-duration")):r;t&&t.timeStamp?((i=(t.timeStamp-this.lastClick)/1e3)<r?this.setPicsTransitions(i.toFixed(1),e):n<r&&this.setPicsTransitions(r,e),this.lastClick=t.timeStamp):this.setPicsTransitions(r,e),this.slidesDirection!==e&&(this.setPicsTransitions(r,e),this.slidesDirection=e)},nextImage:function(t,e){this.imagePrevNext(t,"next",e||"switch-to-image")},imagePrevNext:function(t,e,i){if(this.currentImageID){var r="next"===e?this.currentPic.$el.next():this.currentPic.$el.prev();r.length||(r=this.$images_wrapper.children(":"+("next"===e?"first":"last"))),this.checkNeedUpdateTransition(t,e),this.$images_wrapper.children(".changed-opacity").each(h.Z.bind((function(t,e){var i=(0,s.ZP)(e);i.css({opacity:""}),i.removeClass("changed-opacity")}),this)),this.moveToImage(r.attr("data-id"),!0,i),t&&t.stopPropagation()}},changeSlideonHover:function(t){var e=this.isLeftSideOfWidget(t)?"prev":"next";this.slidesDirection!==e&&this.stopAutoplay(),this.startAutoplay(e),this.slidesDirection=e},onMouseEnter:function(t){this.onImageClick(t),this.changeSlideonHover(t)},thumbnailClick:function(t){this.moveToImage((0,s.ZP)(t.currentTarget).attr("data-id"),!1,"switch-to-image"),t.stopPropagation()},counterClick:function(t){this.moveToImage((0,s.ZP)(t.currentTarget).attr("data-id"),!1,"switch-to-image"),t.stopPropagation()},moveToImage:function(t,e,i){var r=this;if(t){var n=this.$images_wrapper.children(".image"),a=n.filter('[data-id="'+t+'"]'),l=a.attr("data-original-id"),c=n.index(a),d=h.Z.clone(this.currentPic),m=c,u=this,p="viewer"===this.environment?this.params.pictures.length:this.model.get("pictures").length,g=this.getTransitionsDelay(),f=1e3*this.getTransitionsTime();t=l||t,a.length&&-1!==c&&(this.previousImageID=this.currentImageID,this.currentImageID=t,this.currentPic.$el=a,this.currentPic.num=c,"switch-to-image"===i&&"viewer"===this.environment&&(this.params.theme_data.autoplay&&void 0===this.params.play_method||"autoplay"===this.params.play_method||"hover"===this.params.play_method)&&(this.stopAutoplay(),setTimeout((function(){return r.startAutoplay()}),g)),this.$images_wrapper.toggleClass("enable-transitions",e),this.resetWaitForAnimationEnd(),e&&d.$el&&this.waitForAnimationEnd(d.$el,_),this.direction=!d.$el||!d.$el.length||d.num<m?"forward":"backward",a.data("first-child")&&d.$el&&d.$el.length&&d.$el.data("last-child")?this.direction="forward":a.data("last-child")&&d.$el&&d.$el.length&&d.$el.data("first-child")&&(this.direction="backward"),n.each((function(t){var e=(0,s.ZP)(this),i=n.length-1;1!==n.length?t+1===m||0===m&&t===i?u.setPicPosition(e,"prev",!0):t-1===m||m===i&&0===t?u.setPicPosition(e,"next",!0):t===m?u.setPicPosition(e,"center",t===m):u.setPicPosition(e,"",!1):u.setPicPosition(e,"center",t===m)})),p>1&&p<4&&(c=c>=p?c-p:c),u.$images.find(".counters-text-current").html(c+1),!e&&_())}function _(){if(e||u.initialRender||window.requestAnimationFrame((function(){u.$images_wrapper.addClass("enable-transitions")})),u.trigger("currentImageChanged",t,e,i),u.handleCounters&&!u.initialRender){var r=u.$counters_container.children('[data-id="'+t+'"]');u.$counters_container.children(".active").removeClass("active"),r.addClass("active");var n=r.get(0).offsetLeft,s=u.$counters.find(".items-wrapper").width(),a=void 0;n+2*u.COUNTER_WIDTH-u.$counters.find(".items-wrapper").scrollLeft()>s?a=n+2*u.COUNTER_WIDTH-s:n-u.COUNTER_WIDTH-u.$counters.find(".items-wrapper").scrollLeft()<0&&(a=n-u.COUNTER_WIDTH),void 0!==a&&(e?u.$counters.find(".items-wrapper").stop().animate({scrollLeft:a},f):u.$counters.find(".items-wrapper").scrollLeft(a))}if(u.handleThumbnails&&!u.initialRender){var l=u.$thumbnails_container.children('[data-id="'+t+'"]');u.$thumbnails_container.children(".active").removeClass("active"),l.addClass("active");n=l.position().left,s=u.$thumbnails.find(".items-wrapper").width(),a=void 0;n+2*(u.THUMBNAIL_WIDTH+u.THUMBNAIL_PADDING)-u.THUMBNAIL_PADDING/2-u.$thumbnails.find(".items-wrapper").scrollLeft()>s?a=n+2*(u.THUMBNAIL_WIDTH+u.THUMBNAIL_PADDING)-u.THUMBNAIL_PADDING/2-s:s>2*(u.THUMBNAIL_WIDTH+u.THUMBNAIL_PADDING)&&n-u.THUMBNAIL_WIDTH-u.THUMBNAIL_PADDING/2-u.$thumbnails.find(".items-wrapper").scrollLeft()<0&&(a=n-u.THUMBNAIL_WIDTH-u.THUMBNAIL_PADDING/2)}if(void 0!==a&&(e?u.$thumbnails.find(".items-wrapper").stop().animate({scrollLeft:a},f):u.$thumbnails.find(".items-wrapper").scrollLeft(a)),u.model&&"constructor"===u.environment){var c=u.model.get("pictures"),d=h.Z.findWhere(c,{id:u.currentImageID});if(d&&u.$captions.find(".caption").attr("data-id",u.currentImageID),d&&!d.caption&&u.previousImageID!==u.currentImageID){var m=c.find((function(t){return t.id===u.previousImageID}));m&&m.caption&&(u.lastTextStyle=S.Z.getBaseStyles({editorState:S.Z.createStateFromModel(new(o().Model)(m.caption))}))}u.block.nonReactSetSharedState(u.block.createTextState({rawModel:d&&d.caption,lastStyle:u.lastTextStyle}))}else!u.params.theme_data.captions&&"theme_captions"!==u.params.current_theme||"viewer"!==u.environment||(e?u.$captions.find('.caption-wrapper[data-id="'+u.currentImageID+'"]').stop().fadeIn(200).siblings().stop().fadeOut(200):(u.$captions.find(".caption-wrapper").stop().css({display:"none"}),u.$captions.find('.caption-wrapper[data-id="'+u.currentImageID+'"]').stop().css({display:"block"})));u.preloadImages(),u.preloadThumbImages()}},waitForAnimationEnd:function(t,e){this.resetWaitHook=c.Z.waitForTransitionEnd(t,this.getTransitionsTime(),"transform",e)},resetWaitForAnimationEnd:function(){this.resetWaitHook&&this.resetWaitHook()},setPicPosition:function(t,e,i){(0,s.ZP)(t).removeClass("center-image prev-image next-image neighbour hidden").addClass((e?e+"-image ":"hidden")+(i?"neighbour":"")),(0,s.ZP)(t).data("last-position",e),(0,s.ZP)(t).data("last-neighbour",i)},preloadImages:function(){if("viewer"===this.environment){var t=this.$images_wrapper.children('[data-id="'+this.currentImageID+'"]');if(t.length){var e=t.prev();e.length||(e=this.$images_wrapper.children(":last"));var i=t.next();i.length||(i=this.$images_wrapper.children(":first"));var r=this;n(t),RM.screenshot||(n(e),n(i))}}function n(t){if(r.isFullscreenMode){if(t.data("orig-src")){var e=new Image;e.onload=function(){t.css({"background-image":'url("'+e.src+'")'}).removeData("orig-src")},e.src=t.data("orig-src")}r.$images_wrapper.find(".image").css("border-radius",0)}t.attr("data-src")&&(r.preloadImagesList.push({url:t.attr("data-src")}),t.css({"background-image":'url("'+t.attr("data-src")+'")'}).removeAttr("data-src"))}},preloadThumbImages:function(){if("viewer"===this.environment&&this.params.theme_data.thumbnails){var t=this.initialRender?this.thumbsWidth:this.$thumbnails_scroll_wrapper.width(),e=this.initialRender?0:this.$thumbnails.find(".items-wrapper").scrollLeft();this.$thumbnails.find(".items-wrapper .thumb").each(h.Z.bind((function(i,r){var n=(0,s.ZP)(r);if(n.attr("data-src")){var a=i*this.THUMBNAIL_WIDTH-this.THUMBNAIL_PADDING/2,o=this.THUMBNAIL_WIDTH+this.THUMBNAIL_PADDING;a-e>t+o||a+o-e<0-o||(this.preloadImagesList.push({url:n.attr("data-src")}),n.css({"background-image":'url("'+n.attr("data-src")+'")'}).removeAttr("data-src"))}}),this))}},updateCurrentImageID:function(t){if(t.pictures&&t.pictures.length)if(this.currentImageID){var e=h.Z.findWhere(t.pictures,{id:this.currentImageID});this.currentImageID=e?e.id:this.getFirstPictureID(t)}else this.currentImageID=this.getFirstPictureID(t);else this.currentImageID=void 0},getFirstPictureID:function(t){return h.Z.sortBy(t.pictures,"num")[0].id},toggleFullscreen:function(t){"constructor"!==this.environment&&(this.isFullscreenMode?this.leaveFullscreen():this.enterFullscreen(),t.stopPropagation())},enterFullscreen:function(){"constructor"!==this.environment&&(this.isFullscreenMode||(this.isFullscreenMode=!0,this.$parentBeforeFullscreen=this.$el.parent(),(0,s.ZP)(".constructor #widgetbar").addClass("hidden"),this.$el.addClass("fullscreen-mode"),this.$el.appendTo("body").css("z-index",999),(0,s.ZP)(window).on("resize",this.onFullscreenResize),(0,s.ZP)("body").on("keyup",this.onFullscreenKeyUp),h.Z.defer((function(){RM.common.disableShortcuts.slideshow=!0})),this.onFullscreenResize(),c.Z.getFocusBack(),this.preloadImages()))},onFullscreenKeyUp:function(t){t.keyCode===s.ZP.keycodes.left&&this.prevImage(),t.keyCode===s.ZP.keycodes.right&&this.nextImage(),t.keyCode===s.ZP.keycodes.esc&&this.leaveFullscreen()},onFullscreenResize:function(){var t=this.$el.width(),e=this.$el.height(),i=this.params.theme_data.counters&&(("middle"===this.params.active_arrows||"outside"===this.params.theme_data.counters_position)&&"dots"===this.params.theme_data.counters_type||"theme_captions"===this.params.current_theme),r=e-(this.params.theme_data.thumbnails?this.THUMBNAILS_HEIGHT:0)-(this.params.theme_data.captions||"theme_captions"===this.params.current_theme?this.params.captions_h:0)-(i?this.COUNTERS_HEIGHT:0);this.applyVisualState(this.params,{w:t,h:e,images_h:r,captions_h:this.params.captions_h})},leaveFullscreen:function(){"constructor"!==this.environment&&this.isFullscreenMode&&(this.isFullscreenMode=!1,this.$el.appendTo(this.$parentBeforeFullscreen).css("z-index","auto"),(0,s.ZP)(window).off("resize",this.onFullscreenResize),this.$el.removeClass("fullscreen-mode"),(0,s.ZP)(".constructor #widgetbar").removeClass("hidden"),(0,s.ZP)("body").off("keyup",this.onFullscreenKeyUp),h.Z.defer((function(){delete RM.common.disableShortcuts.slideshow})),this.applyVisualState(this.params),this.setNewPicsWidths(this.params.w))},startAutoplay:function(t){var e;this.autoPlayInterval||(e=1e3*(t?this.params.theme_data.hover_delay:this.params.theme_data.autoplay_delay||this.AUTOPLAY_DELAY),this.autoPlayInterval=setInterval(h.Z.bind((function(){this.imagePrevNext(null,t||"next","switch-to-image-autoplay")}),this),e))},stopAutoplay:function(){clearInterval(this.autoPlayInterval),this.autoPlayInterval=null},destroy:function(){this.isDestroyed=!0,this.stopAutoplay(),this.leaveFullscreen(),this.resetWaitForAnimationEnd(),this.$el&&this.$el.remove(),this.textWidgetWrapper&&n.unmountComponentAtNode(this.textWidgetWrapper[0])},setSwipeAction:function(){y.Z.isDesktop||(this.picsSwipe=this.$images_wrapper.RMSwipe({$scrollElements:this.mag.$mag_container,maxTransitionSpeed:1e3*this.getTransitionsTime(),rubberBandForce:1/1.47,getCurrentConstraints:function(){var t={},e=this.isFullscreenMode?this.$images_wrapper.width():this.params.w;return t.$moveItems=this.currentPic.$el.add(this.currentPic.$el.prev()).add(this.currentPic.$el.next()),t.$referenceItem=t.$moveItems.filter(":not(.center-image)").first(),this.currentPic.$el.is(":last-child")?t.left={max:0,noTrigger:!0}:t.left={max:e},this.currentPic.$el.is(":first-child")?t.right={max:0,noTrigger:!0}:t.right={max:e},t}.bind(this),onSwipeStart:function(){var t,e,i=this,r=this.getTransitionsDelay();"viewer"===this.environment?(t=this.params.play_method,e=this.params.theme_data.autoplay&&void 0===t):(t=this.model.get("play_method"),e=this.model.get("theme_data").autoplay),("autoplay"===t||e)&&(this.stopAutoplay(),setTimeout((function(){return i.startAutoplay()}),r)),this.$images_wrapper.removeClass("enable-transitions")}.bind(this),customMoveCheck:function(t,e){return!(t.hasClass("prev-image")&&e<0)&&!(t.hasClass("next-image")&&e>0)}.bind(this),callback:function(t){var e;"right"===t&&(e=this.currentPic.$el.prev()),"left"===t&&(e=this.currentPic.$el.next()),e.length||(e=this.currentPic.$el),this.moveToImage(e.attr("data-id"),!1,"switch-to-image")}.bind(this)}).data("swipe"))}}),B=j},1356:function(t,e,i){i.r(e);var r=i(311),n=i(320),s=i(1303),a=i(1357),o=s.Z.extend({MIN_TOP_SCROLL_SPACE:5,TIME_OF_STOPPED_SCROLL:55,render:function(){var t=this;(this.makeBox("widget-slideshow"),this.pictures=n.Z.filter(this.pictures,(function(t){return!t.error})),this.player=new a.Z({params:this,$container:this.$el,environment:"viewer",block:null,mag:this.page&&this.page.mag,page:this.page,viewport:this.page.pageViewport}),void 0!==this.play_method&&"scroll"===this.play_method)&&((0,r.ZP)(window).on("scroll",this.onScrollTransition),this.innerContentTop=this.page.contentPosition.top/this.page.scale,this.innerContainerHeight=this.page.mag.getContainerSizeCached().height/this.page.scale,this.isScrolling=!1,this.$image=this.$el.find(".image"),this.lastScrollTop=0,this.isCrossfade="crossfade"===this.transition_type,this.delay=(this.theme_data.scroll_delay>0?this.theme_data.scroll_delay:1)+(this.isCrossfade?this.theme_data.crossfade:0),this.picsID=[],this.player.$images_wrapper.children(".image").each((function(e,i){t.picsID.push((0,r.ZP)(i).attr("data-id"))})));return this.player.on("ready",n.Z.bind((function(){setTimeout(this.widgetIsLoaded,100)}),this)),!this.theme_data.arrows||"library"!==this.theme_data.arrows_type&&"noun"!==this.theme_data.arrows_type||this.renderNounIcons(),this.rendered=!0,this},onScrollTransition:function(){var t=this,e=window.pageYOffset||document.documentElement.scrollTop,i=this.y+this.innerContentTop,r=i-this.innerContainerHeight,n=0*(i-r)+r+this.theme_data.start_offset||0,s=this.isCrossfade?10*this.theme_data.crossfade:this.TIME_OF_STOPPED_SCROLL,a=this.picsID.length,o=n>0?(e-n*this.page.scale)/this.page.scale:e/this.page.scale,h=Math.floor(o/this.delay),l=h+1,c=l>=a?l-Math.floor(l/a)*a:l;this.isScrolling&&(this.setFreezeStyles(e),c>=0&&this.player.currentImageID!==this.picsID[c]&&this.changeImage(e,h,this.picsID[c])),n<=0&&e<this.MIN_TOP_SCROLL_SPACE?setTimeout((function(){t.changeImage(e,h,t.picsID[0]),t.isScrolling=!1}),s):(clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){t.setFreezeStyles(e)}),s))},changeImage:function(t,e,i){(t>this.lastScrollTop&&t>=e*this.delay||t<this.lastScrollTop&&t>=(e-1)*this.delay)&&this.player.moveToImage(i,!0,"switch-to-image-scroll"),this.lastScrollTop=t<=0?0:t},setFreezeStyles:function(){var t=this.$el.find(".center-image"),e=this.$el.find(".prev-image"),i=this.getRealOpacity(t.css("opacity")),r=this.getRealOpacity(e.css("opacity"));this.isCrossfade&&(t.css({opacity:i>r?i:1-r}),e.css({opacity:r>i?r:1-i}),t.hasClass("changed-opacity")||e.hasClass("changed-opacity")||e.addClass("changed-opacity"))},getRealOpacity:function(t){return t<.1?10*t:t},renderNounIcons:function(){var t=this.theme_data.arrows_position,e=this.left_arrow_noun&&this.left_arrow_noun.rasterUrl?this.left_arrow_noun:this.theme_data.left_icon_noun,i=this.right_arrow_noun&&this.right_arrow_noun.rasterUrl?this.right_arrow_noun:this.theme_data.right_icon_noun;if(e&&(e.rasterUrl||e.b64url)){var s=(0,r.ZP)("<img>");s.on("load",n.Z.bind((function(){"bottom"===t?this.$el.find(".prev-picture-arrow-bottom").empty().html(s.clone()):this.$el.find(".prev-picture-arrow-middle").empty().html(s.clone())}),this)).on("error",this.widgetIsLoaded),s.attr("src",e.raster3xUrl||e.raster2xUrl||e.rasterUrl||e.b64url||"")}if(i&&(i.rasterUrl||i.b64url)){var a=(0,r.ZP)("<img>");a.on("load",n.Z.bind((function(){"bottom"===t?this.$el.find(".next-picture-arrow-bottom").empty().html(a.clone()):this.$el.find(".next-picture-arrow-middle").empty().html(a.clone())}),this)).on("error",this.widgetIsLoaded),a.attr("src",i.raster3xUrl||i.raster2xUrl||i.rasterUrl||i.b64url||"")}},isValid:function(){return this.pictures&&this.pictures.length},start:function(){return s.Z.prototype.start.call(this),!RM.screenshot&&!this.destroyed&&this.player&&(this.theme_data.autoplay&&void 0===this.play_method||"autoplay"===this.play_method)&&this.rendered&&this.loaded&&this.player.startAutoplay(),this},stop:function(){return s.Z.prototype.stop.call(this),!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&this.loaded&&this.player.stopAutoplay(),this},destroy:function(){return this.player&&this.player.off(),this.player&&this.player.destroy(),this.player=null,"scroll"===this.play_method&&(0,r.ZP)(window).off("scroll",this.onScrollTransition),s.Z.prototype.destroy.apply(this,arguments)}});e.default=o}}]);